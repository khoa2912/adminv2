"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[627],{81627:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var i=t(29439),r=t(37762),s=t(74165),a=t(15861),o=t(20890),c=t(72363),l=t(36151),d=t(57621),h=t(42169),u=t(39504),p=t(72791),m=t(5701),x=t(64554),g=t(48550),f=t(10916),Z=t(13085),j=t(6362),v=t(59434),y=t(79286),b=t(70066),C=t(27247),w=t(80184),S=function(e){var n=f.Z.TabPane,t=e.item,S=t.card,k=t.image,_=t.name,N=(t.value,(0,v.v9)((function(e){return e.category})),(0,p.useState)(!1)),T=(0,i.Z)(N,2),I=T[0],P=T[1],z=(0,p.useState)(""),B=(0,i.Z)(z,2),L=B[0],E=B[1],F=(0,p.useState)(""),O=(0,i.Z)(F,2),K=O[0],R=O[1],X=(0,p.useState)(""),A=(0,i.Z)(X,2),U=(A[0],A[1],(0,p.useState)("")),V=(0,i.Z)(U,2),q=(V[0],V[1],(0,p.useState)([])),J=(0,i.Z)(q,2),D=J[0],G=J[1],Q=(0,p.useState)([]),W=(0,i.Z)(Q,2),H=(W[0],W[1]),M=(0,p.useState)(!1),Y=(0,i.Z)(M,2),$=(Y[0],Y[1]),ee=(0,v.I0)(),ne=function(){return P(!0)},te=function(){return P(!1)},ie=function(){return oe(!1)},re=(0,p.useState)(!1),se=(0,i.Z)(re,2),ae=se[0],oe=se[1],ce=(0,p.useState)(""),le=(0,i.Z)(ce,2),de=le[0],he=(le[1],(0,p.useState)("")),ue=(0,i.Z)(he,2),pe=ue[0],me=(ue[1],(0,p.useState)("")),xe=(0,i.Z)(me,2),ge=(xe[0],xe[1],function(e){var n=e.fileList;return G(n)});(0,p.useEffect)((function(){$(!0),ee((0,b.p_)()).then((function(e){e.map((function(e,n){return e.id=n+1})),H(e),$(!1)})),D.push({url:e.item.image}),G(D)}),[ee]);var fe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Ze=function(e){return new Promise((function(n,t){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return n(i.result)},i.onerror=function(e){return t(e)}}))},je=(0,w.jsxs)("div",{children:[(0,w.jsx)(y.Z,{}),(0,w.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),ve=function(){var n=(0,a.Z)((0,s.Z)().mark((function n(){var t,i,a,o,c,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(D),t=[],!D||!D[0]||null==D[0].type){n.next=34;break}i=(0,r.Z)(D),n.prev=4,i.s();case 6:if((a=i.n()).done){n.next=16;break}if(o=a.value,new FileReader,!o){n.next=14;break}return n.next=12,Ze(o.originFileObj);case 12:c=n.sent,t.push(c);case 14:n.next=6;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(4),i.e(n.t0);case 21:return n.prev=21,i.f(),n.finish(21);case 24:return n.prev=24,n.next=27,fetch("http://localhost:3001/product/uploadPicture",{method:"POST",body:JSON.stringify({data:t}),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(n){var t={_id:e.item._id,nameCategory:K,categoryImage:n.result[0]};console.log(t),ee((0,b.XV)(t)).then((function(e){console.log("run if"),ee((0,b.p_)()).then((function(e){e.map((function(e,n){return e.id=n+1})),H(e),$(!1)})),console.log(e),"success"===e?(te(),Z.Z.success({message:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng",description:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng th\xe0nh c\xf4ng."})):(te(),Z.Z.error({message:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng",description:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng th\u1ea5t b\u1ea1i."}))}))}));case 27:n.next=32;break;case 29:throw n.prev=29,n.t1=n.catch(24),new Error("Something went wrong");case 32:n.next=37;break;case 34:l={_id:e.item._id,nameCategory:K,categoryImage:0!=D.length?D[0].url:null},console.log(l),ee((0,b.XV)(l)).then((function(e){console.log("run else"),ee((0,b.p_)()).then((function(e){e.map((function(e,n){return e.id=n+1})),H(e),$(!1)})),console.log(e),"success"===e?(te(),Z.Z.success({message:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng",description:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng th\xe0nh c\xf4ng."})):(te(),Z.Z.error({message:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng",description:"C\u1eadp nh\u1eadp Nh\xe3n h\xe0ng th\u1ea5t b\u1ea1i."}))}));case 37:case"end":return n.stop()}}),n,null,[[4,18,21,24],[24,29]])})));return function(){return n.apply(this,arguments)}}();return(0,w.jsxs)("div",{style:{display:"inline-block",marginBottom:"20px",width:"19%",minWidth:"265px"},children:[function(t){var i,r,s=e.item.image;return console.log(s),"edit"===t?(i="Ch\u1ec9nh s\u1eeda nh\xe3n h\xe0ng",r=!1):"create"===t?(i="Th\xeam nh\xe3n h\xe0ng",r=!1):(i="Xem chi ti\u1ebft nh\xe3n h\xe0ng",r=!0,console.log(s)),(0,w.jsx)(m.Z,{open:I,onClose:te,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,w.jsxs)(x.Z,{sx:fe,children:[(0,w.jsx)(o.Z,{id:"modal-modal-title",variant:"h3",component:"h2",children:i}),(0,w.jsx)(f.Z,{defaultActiveKey:"1",style:{color:"black",fontSize:"19px"},children:(0,w.jsx)(n,{tab:(0,w.jsx)("span",{children:"Th\xf4ng tin chung"}),children:(0,w.jsx)("div",{className:"container_addProduct",style:{display:"flex",paddingTop:"0px",color:"black",fontSize:"17px"},children:(0,w.jsxs)("div",{className:"container_form_addProduct",style:{paddingBottom:"50px",width:"40%",paddingRight:"30px"},children:[(0,w.jsx)(g.Z,{required:!0,style:{width:"100%",marginBottom:"15px"},id:"outlined-error",label:"T\xean nh\xe3n h\xe0ng",defaultValue:null!==e&&void 0!==e&&e.item?null===e||void 0===e?void 0:e.item.name:"",disabled:r,onChange:function(e){return R(e.target.value)}}),(0,w.jsx)("ul",{}),(0,w.jsx)(j.gq,{listType:"picture-card",fileList:D,onChange:ge,beforeUpload:function(){return!1},children:D.length>0?null:je}),(0,w.jsx)(m.Z,{visible:ae,title:de,footer:null,onCancel:ie,style:{zIndex:9999999},children:(0,w.jsx)("img",{alt:"example",style:{width:"100%"},src:pe})})]})})},"1")}),(0,w.jsxs)(c.Z,{sx:{},children:[(0,w.jsx)(l.Z,{size:"small",variant:"contained",color:"success",disabled:r,onClick:ve,children:"L\u01b0u"}),(0,w.jsx)(l.Z,{size:"small",variant:"contained",onClick:te,children:"\u0110\xf3ng"})]})]})})}(L),(0,w.jsxs)(d.Z,{className:S,style:{width:"95%"},children:[(0,w.jsx)(h.Z,{component:"img",height:"100",image:k,alt:"green iguana",style:{objectFit:"cover"}}),(0,w.jsx)(u.Z,{children:(0,w.jsx)(o.Z,{className:_,color:"textPrimary",variant:"h4",children:_})}),(0,w.jsxs)(c.Z,{sx:{justifyContent:"space-between"},children:[(0,w.jsx)(l.Z,{size:"small",variant:"contained",onClick:function(){E("edit"),ne()},children:"Ch\u1ec9nh s\u1eeda"}),(0,w.jsx)(l.Z,{size:"small",variant:"contained",onClick:function(){E("view"),ne()},children:"Chi ti\u1ebft"}),(0,w.jsx)(j.gn,{placement:"right",title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1?",onConfirm:function(){var n={_id:null===e||void 0===e?void 0:e.item._id};console.log(n),ee((0,b.Z6)(n)).then((function(e){ee((0,b.KQ)())}))},okText:"\u0110\u1ed3ng \xfd",cancelText:"Kh\xf4ng",children:(0,w.jsx)(l.Z,{variant:"outlined",color:"error",style:{cursor:"pointer"},startIcon:(0,w.jsx)(C.Z,{}),size:"small",children:"Xo\xe1"})})]})]})]})},k=t(53767),_=t(94721),N=t(90177),T=t(42419),I=t(98473),P=t(14941),z=t(37482),B=t(66106),L=t(30914),E=t(13830),F=t(37083),O=t(57482),K=t(5403),R=t(16871),X=function(){var e=I.Z.Option,n=(0,v.I0)(),t=(0,v.v9)((function(e){return e.category})),r=(0,p.useState)([]),s=(0,i.Z)(r,2),a=s[0],o=s[1],c=(0,p.useState)(!1),d=(0,i.Z)(c,2),h=d[0],u=d[1],m=(0,p.useState)([]),g=(0,i.Z)(m,2),f=(g[0],g[1],(0,p.useState)("")),Z=(0,i.Z)(f,2),j=(Z[0],Z[1],(0,p.useState)({CategoryName:""})),y=(0,i.Z)(j,2),C=y[0],X=y[1];(0,p.useEffect)((function(){u(!0),n((0,b.p_)()).then((function(e){e.map((function(e,n){return e.id=n+1})),o(e),u(!1)}))}),[n,t]);var A=(0,R.s0)();return(0,p.useEffect)((function(){var e=JSON.parse(localStorage.getItem("screenrole")).find((function(e){return"/category"===e.screenSlug}));console.log("obj",e),e||A("/404")}),[]),(0,w.jsxs)(N.Z,{children:[!0===t.loading?(0,w.jsx)(x.Z,{sx:{width:"100%",marginBottom:"20px"},children:(0,w.jsx)(O.Z,{})}):null,(0,w.jsx)(P.Z,{style:{marginBottom:"10px"},children:(0,w.jsx)(z.Z,{defaultActiveKey:["1"],expandIconPosition:"right",className:"mps-search-header-collapse",children:(0,w.jsx)(z.Z.Panel,{header:(0,w.jsxs)("span",{className:"mps-search-header-panel-title",children:[" ","Th\xf4ng tin t\xecm ki\u1ebfm"]}),children:(0,w.jsx)(E.Z,{style:{border:"none"},children:(0,w.jsx)(E.Z.Grid,{style:{width:"50%",height:"80px"},children:(0,w.jsxs)(B.Z,{children:[(0,w.jsx)(L.Z,{span:8,children:(0,w.jsx)(P.Z.Item,{children:"T\xean nh\xe3n h\xe0ng"})}),(0,w.jsx)(L.Z,{span:16,children:(0,w.jsx)(P.Z.Item,{children:(0,w.jsx)(I.Z,{mode:"multiple",optionFilterProp:"data",optionLabelProp:"text",onChange:function(e){C.CategoryName=e,X(C)},children:a&&a.map((function(n,t){return(0,w.jsx)(e,{data:n.name,text:n.name,children:(0,w.jsx)("div",{className:"global-search-item",children:(0,w.jsx)("span",{children:n.name})})},n._id)}))})})})]})})})},"1")})}),(0,w.jsxs)(k.Z,{direction:"row",divider:(0,w.jsx)(_.Z,{orientation:"vertical",flexItem:!0}),spacing:2,sx:{marginBottom:"20px"},children:[(0,w.jsx)(l.Z,{variant:"outlined",onClick:function(){u(!0),n((0,b.p_)(C)).then((function(e){o(e),u(!1)}))},startIcon:(0,w.jsx)(K.Z,{}),style:{cursor:"pointer"},children:"T\xecm ki\u1ebfm"}),(0,w.jsx)(l.Z,{variant:"outlined",href:"/createCategory",color:"success",startIcon:(0,w.jsx)(T.Z,{}),style:{cursor:"pointer"},children:"Th\xeam m\u1edbi"})]}),(0,w.jsx)("div",{style:{display:"inline-block"},children:(0,w.jsx)(F.Z,{tip:"Loading...",spinning:h,children:a&&a.map((function(e,n){return(0,w.jsx)(S,{item:e},n)}))})})]})}}}]);
//# sourceMappingURL=627.3b7b2c86.chunk.js.map