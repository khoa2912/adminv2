"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[904],{47904:function(e,t,n){n.r(t),n.d(t,{DashboardDefault:function(){return F},default:function(){return J}});var r=n(37762),i=n(29439),a=n(72791),c=n(61889),s=n(20890),o=n(64554),d=n(53767),l=n(36151),u=n(1413),h=n(13967),p=n(13496),m=n(74165),x=n(15861),f=n(93160),g=n(75875),Z=n(59434),v=n(80184),j={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},y=function(e){var t=e.slot,n=(0,h.Z)(),r=n.palette.text,c=r.primary,s=r.secondary,o=n.palette.divider,d=(0,a.useState)(j),l=(0,i.Z)(d,2),y=l[0],b=l[1],w=(0,a.useState)([]),T=(0,i.Z)(w,2),I=T[0],S=T[1],_=(0,Z.I0)();(0,a.useEffect)((function(){_(function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var n,r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:g.oT.GET_ALL_VIEW_REQUEST}),e.next=4,f.Z.post("totalView/getTotalViews");case 4:if(n=e.sent,console.log(n),200!==n.status){e.next=14;break}return(r=n.data.total).map((function(e,t){return e.id=t+1})),t({type:g.oT.GET_ALL_VIEW_SUCCESS,payload:{total:r}}),console.log(r),e.abrupt("return",r);case 14:t({type:g.oT.GET_ALL_VIEW_FAILURE});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){e.map((function(e,t){return e.id=t+1})),S(e)}))}),[_]);var P=[],k=new Date,D=new Date(k.getTime()-6912e5);D.setHours(0,0,0),k.setHours(0,0,0),I.map((function(e){var t=function(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}(e.createdTime);t.setHours(0,0,1),t.getTime()>=D.getTime()&&t.getTime()<=k.getTime()&&P.push(e)}));for(var Q=[],C=0;C<P.length-1;C++){var E;E=P[C+1].view-P[C].view,Q.push(E)}(0,a.useEffect)((function(){b((function(e){return(0,u.Z)((0,u.Z)({},e),{},{colors:[n.palette.primary.main,n.palette.primary[700]],xaxis:{categories:["7 Ng\xe0y tr\u01b0\u1edbc","6 Ng\xe0y tr\u01b0\u1edbc","5 Ng\xe0y tr\u01b0\u1edbc","4 Ng\xe0y tr\u01b0\u1edbc","3 Ng\xe0y tr\u01b0\u1edbc","2 Ng\xe0y tr\u01b0\u1edbc","H\xf4m qua"],labels:{style:{colors:[s,s,s,s,s,s,s,s,s,s,s,s]}},axisBorder:{show:!0,color:o},tickAmount:"month"===t?11:7},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:o},tooltip:{theme:"light"}})}))}),[c,s,o,n,t]);var A=[{name:"Tu\u1ea7n n\xe0y",data:Q}];return(0,v.jsx)(p.Z,{options:y,series:A,type:"area",height:450})},b=n(76389),w=n(60438),T=n.n(w),I=(n(62610),{chart:{type:"bar",height:365,toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"45%",borderRadius:4}},dataLabels:{enabled:!1},xaxis:{categories:["S\u1ea3n ph\u1ea9m b\xe1n ch\u1ea1y trong tu\u1ea7n"],axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1},grid:{show:!1}}),S=function(e){var t=(0,h.Z)(),n=(0,a.useState)([]),r=(0,i.Z)(n,2),c=r[0],s=r[1],o=(0,Z.I0)();(0,a.useEffect)((function(){o((0,b.VZ)()).then((function(e){e.map((function(e,t){return e.id=t+1})),s(e)}))}),[o]);var d=t.palette.text,l=d.primary,m=d.secondary,x=t.palette.info.light;function f(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}var g=new Date(e.startTime),j=new Date(e.endTime),y=[];if(""===e.keyOpen){var w=[],T=[];c.map((function(e){e.items.map((function(e){w.push(e)}))})),w.reduce((function(e,t){return e[t.productId._id]||(e[t.productId._id]={productId:t.productId,purchasedQty:0},T.push(e[t.productId._id])),e[t.productId._id].purchasedQty+=t.purchasedQty,e}),{}),y=T}else if(e.startTime!==e.endTime){w=[],T=[];null===c||void 0===c||c.map((function(e){var t=f(e.orderStatus[3].date);t.setHours(0,0,1),t.getTime()>=g.getTime()&&t.getTime()<=j.getTime()&&e.items.map((function(e){w.push(e)}))})),w.reduce((function(e,t){return e[t.productId._id]||(e[t.productId._id]={productId:t.productId,purchasedQty:0},T.push(e[t.productId._id])),e[t.productId._id].purchasedQty+=t.purchasedQty,e}),{}),y=T}else{w=[],T=[];null===c||void 0===c||c.map((function(e){var t=f(e.orderStatus[3].date);t.setHours(0,0,1);var n=g;t.getTime()<=j.getTime()&&t.getTime()>=n.getTime()&&e.items.map((function(e){w.push(e)}))})),w.reduce((function(e,t){return e[t.productId._id]||(e[t.productId._id]={productId:t.productId,purchasedQty:0},T.push(e[t.productId._id])),e[t.productId._id].purchasedQty+=t.purchasedQty,e}),{}),y=T}var S=[],_=[];y.map((function(e){S.push(e.purchasedQty),_.push(e.productId.name)}));var P=[{name:_,data:S}],k=(0,a.useState)(I),D=(0,i.Z)(k,2),Q=D[0],C=D[1];return(0,a.useEffect)((function(){C((function(e){return(0,u.Z)((0,u.Z)({},e),{},{colors:[x],xaxis:{labels:{style:{colors:[m,m,m]}}},tooltip:{theme:"light"}})}))}),[l,x,m]),(0,v.jsx)("div",{id:"chart",children:(0,v.jsx)(p.Z,{options:Q,series:P,type:"bar",height:365})})},_=n(29242),P=n(67560),k=n(22231),D=n(83099),Q=n(81918),C=n(18341),E=n(99596),A=function(e){var t=e.color,n=e.title,r=e.count,i=e.percentage,a=e.isLoss,l=e.extra;return(0,v.jsxs)(P.Z,{contentSX:{p:2.25},children:[(0,v.jsxs)(d.Z,{spacing:.5,children:[(0,v.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:n}),(0,v.jsxs)(c.ZP,{container:!0,alignItems:"center",children:[(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(s.Z,{variant:"h4",color:"inherit",children:r})}),i&&(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(Q.Z,{variant:"combined",color:t,icon:(0,v.jsxs)(v.Fragment,{children:[!a&&(0,v.jsx)(C.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),a&&(0,v.jsx)(E.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(i,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]}),(0,v.jsx)(o.Z,{sx:{pt:2.25},children:(0,v.jsxs)(s.Z,{variant:"caption",color:"textSecondary",children:[(0,v.jsx)(s.Z,{component:"span",variant:"caption",sx:{color:"".concat(t||"primary",".main")},children:l})," "]})})]})};A.defaultProps={color:"primary"};var L=A,H=n(92969),V=n(35680),q=(n(83931),n(43504)),N=n(56890),O=n(35855),z=n(53994),B=n(39281),U=n(79836),W=n(53382),M=n(50533),R=(n(30948),[{id:"productId",align:"left",disablePadding:!1,label:"M\xe3 s\u1ea3n ph\u1ea9m"},{id:"productName",align:"left",disablePadding:!0,label:"T\xean s\u1ea3n ph\u1ea9m"},{id:"quantity",align:"right",disablePadding:!1,label:"S\u1ed1 l\u01b0\u1ee3ng \u0111\xe3 b\xe1n"},{id:"view",align:"right",disablePadding:!1,label:"S\u1ed1 l\u01b0\u1ee3t xem"}]);function X(e){var t=e.product,n=e.productBy;return(0,v.jsx)(N.Z,{children:(0,v.jsx)(O.Z,{children:R.map((function(e){return(0,v.jsx)(z.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t,children:e.label},e.id)}))})})}var G=function(e){var t=e.filterProduct,n=(0,a.useState)([]),r=(0,i.Z)(n,2),c=r[0],s=r[1],d=(0,a.useState)("view"),l=(0,i.Z)(d,2),u=l[0],h=(l[1],(0,a.useState)([])),p=(0,i.Z)(h,2),m=p[0],x=p[1],f=(0,Z.I0)();function g(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function j(e,t){return"desc"===e?function(e,n){return g(e,n,t)}:function(e,n){return-g(e,n,t)}}function y(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}(0,a.useEffect)((function(){f((0,H.Xp)()).then((function(e){e.map((function(e,t){return e.id=t+1})),s(e)})),f((0,b.VZ)()).then((function(e){e.map((function(e,t){return e.id=t+1})),x(e)}))}),[f,t]);var w=(0,a.useState)("desc"),T=(0,i.Z)(w,1)[0],I=(0,a.useState)([]),S=(0,i.Z)(I,1)[0],_=function(e){return-1!==S.indexOf(e)},P=[],k=[];if(m.map((function(e){e.items.map((function(e){P.push(e)}))})),P.reduce((function(e,t){return e[t.productId._id]||(e[t.productId._id]={productId:t.productId,purchasedQty:0},k.push(e[t.productId._id])),e[t.productId._id].purchasedQty+=t.purchasedQty,e}),{}),"view"===t){var D=[];return y(c,j(T,"view")).map((function(e){D.length<10&&D.push(e)})),(0,v.jsx)(o.Z,{children:(0,v.jsx)(B.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,v.jsxs)(U.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-child":{pl:2},"& .MuiTableCell-root:last-child":{pr:3}},children:[(0,v.jsx)(X,{product:T,productBy:u}),(0,v.jsx)(W.Z,{children:y(D,j(T,u)).map((function(e,t){var n=_(e._id),r="enhanced-table-checkbox-".concat(t);return(0,v.jsxs)(O.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{bproduct:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,v.jsx)(z.Z,{component:"th",id:r,scope:"row",align:"left",children:(0,v.jsx)(M.Z,{color:"secondary",component:q.rU,to:"/product",children:e._id})}),(0,v.jsx)(z.Z,{align:"left",children:e.name}),(0,v.jsx)(z.Z,{align:"center",children:e.quantitySold}),(0,v.jsx)(z.Z,{align:"center",children:e.view})]},e._id)}))})]})})})}D=[];return y(k,j(T,"purchasedQty")).map((function(e){D.length<10&&D.push(e)})),(0,v.jsx)(o.Z,{children:(0,v.jsx)(B.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,v.jsxs)(U.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-child":{pl:2},"& .MuiTableCell-root:last-child":{pr:3}},children:[(0,v.jsx)(X,{product:T,productBy:"purchasedQty"}),(0,v.jsx)(W.Z,{children:y(D,j(T,"purchasedQty")).map((function(e,t){var n=_(e.productId._id),r="enhanced-table-checkbox-".concat(t);return(0,v.jsxs)(O.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{bproduct:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,v.jsx)(z.Z,{component:"th",id:r,scope:"row",align:"left",children:(0,v.jsx)(M.Z,{color:"secondary",component:q.rU,to:"/product",children:e.productId._id})}),(0,v.jsx)(z.Z,{align:"left",children:e.productId.name}),(0,v.jsx)(z.Z,{align:"center",children:e.purchasedQty}),(0,v.jsx)(z.Z,{align:"center",children:e.productId.view})]},e.productId._id)}))})]})})})},F=function(){var e=k.Z.RangePicker,t=(0,a.useState)("today"),n=(0,i.Z)(t,2),u=(n[0],n[1],(0,a.useState)("week")),h=(0,i.Z)(u,2),p=h[0],m=(h[1],(0,a.useState)("view")),x=(0,i.Z)(m,2),f=x[0],g=x[1],j=(0,a.useState)([]),w=(0,i.Z)(j,2),I=w[0],Q=w[1],C=(0,a.useState)([]),E=(0,i.Z)(C,2),A=E[0],q=E[1],N=(0,a.useState)([]),O=(0,i.Z)(N,2),z=O[0],B=O[1],U=(0,a.useState)([]),W=(0,i.Z)(U,2),M=(W[0],W[1]),R=(0,a.useState)(new Date(Date.now()-252e5)),X=(0,i.Z)(R,2),F=X[0],J=X[1],K=(0,a.useState)(new Date(Date.now()-252e5)),Y=(0,i.Z)(K,2),$=Y[0],ee=Y[1],te=(0,a.useState)(""),ne=(0,i.Z)(te,2),re=ne[0],ie=ne[1],ae=0,ce=0,se=0,oe=0,de=(0,Z.I0)();(0,a.useEffect)((function(){de((0,H.Xp)()).then((function(e){e.map((function(e,t){return e.id=t+1})),Q(e)})),de((0,b.AU)()).then((function(e){e.map((function(e,t){return e.id=t+1})),q(e)})),de((0,V.Rf)()).then((function(e){e.map((function(e,t){return e.id=t+1})),B(e)})),de((0,b.VZ)()).then((function(e){e.map((function(e,t){return e.id=t+1})),M(e)}))}),[de,ae,se]);console.log(F,"Start"),console.log($,"End");var le=[];z.map((function(e){"63604156b949802220aa04c9"===e.role._id&&le.push(e)}));var ue,he=(0,r.Z)(I);try{for(he.s();!(ue=he.n()).done;){oe+=ue.value.view}}catch(Ie){he.e(Ie)}finally{he.f()}var pe=[];function me(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}null===A||void 0===A||A.map((function(e){!0===e.orderStatus[3].isCompleted&&pe.push(e)}));var xe=[];if(""===re){se=pe.length;var fe,ge=(0,r.Z)(pe);try{for(ge.s();!(fe=ge.n()).done;){var Ze=fe.value;ae+=Ze.totalAmount,ce+=Ze.totalAmount-Ze.shipAmount}}catch(Ie){ge.e(Ie)}finally{ge.f()}}else if(F.getTime()!==$.getTime()){null===pe||void 0===pe||pe.map((function(e){var t=me(e.orderStatus[3].date);t.setHours(0,0,1);var n=F;n.setHours(0,0,0),t.getTime()>=n.getTime()&&t.getTime()<=$.getTime()&&xe.push(e)})),se=xe.length;var ve,je=(0,r.Z)(xe);try{for(je.s();!(ve=je.n()).done;){var ye=ve.value;ae+=ye.totalAmount,ce+=ye.totalAmount-ye.shipAmount}}catch(Ie){je.e(Ie)}finally{je.f()}}else{null===pe||void 0===pe||pe.map((function(e){var t=me(e.orderStatus[3].date);t.setHours(0,0,1);var n=F;n.setHours(0,0,0),t.getTime()<=$.getTime()&&t.getTime()>=n.getTime()&&xe.push(e)})),se=xe.length;var be,we=(0,r.Z)(xe);try{for(we.s();!(be=we.n()).done;){var Te=be.value;ae+=Te.totalAmount,ce+=Te.totalAmount-Te.shipAmount}}catch(Ie){we.e(Ie)}finally{we.f()}}return(0,v.jsxs)(c.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,v.jsx)(c.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,v.jsxs)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(s.Z,{variant:"h5",children:"Trang ch\u1ee7"})}),(0,v.jsx)(D.Z,{direction:"vertical",size:12,children:(0,v.jsx)(e,{ranges:{"H\xf4m nay":[T()(),T()()],"Th\xe1ng n\xe0y":[T()().startOf("month"),T()().endOf("month")]},onChange:function(e){e?(new Date(e[0]._d-252e5),new Date(e[1]._d-252e5),J(e[0]._d),ee(e[1]._d),ie("Open")):ie("")}})})]})}),(0,v.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,v.jsx)(L,{title:"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3t xem",count:oe,percentage:"",extra:""})}),(0,v.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,v.jsx)(L,{title:"T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi d\xf9ng",count:le.length,percentage:"",extra:""})}),(0,v.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,v.jsx)(L,{title:"T\u1ed5ng s\u1ed1 \u0111\u01a1n h\xe0ng",count:se,percentage:"",isLoss:!0,color:"success",extra:""})}),(0,v.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,v.jsx)(L,{title:"T\u1ed5ng s\u1ed1 doanh thu",count:(0,_.Z)(ae)+" Vn\u0111",percentage:"",isLoss:!0,color:"success",extra:""})}),(0,v.jsx)(c.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,v.jsxs)(c.ZP,{item:!0,xs:12,md:7,lg:8,children:[(0,v.jsx)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(s.Z,{variant:"h5",children:"Bi\u1ec3u \u0111\u1ed3 l\u01b0\u1ee3t xem"})})}),(0,v.jsx)(P.Z,{content:!1,sx:{mt:1.5},children:(0,v.jsx)(o.Z,{sx:{pt:1,pr:2},children:(0,v.jsx)(y,{slot:p})})})]}),(0,v.jsxs)(c.ZP,{item:!0,xs:12,md:5,lg:4,children:[(0,v.jsxs)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(s.Z,{variant:"h5",children:"T\u1ed5ng quan doanh thu"})}),(0,v.jsx)(c.ZP,{item:!0})]}),(0,v.jsxs)(P.Z,{sx:{mt:2},content:!1,children:[(0,v.jsx)(o.Z,{sx:{p:3,pb:0},children:(0,v.jsxs)(d.Z,{spacing:2,children:[(0,v.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:"Doanh s\u1ed1"}),(0,v.jsxs)(s.Z,{variant:"h3",children:[(0,_.Z)(ce)," Vn\u0111"]})]})}),(0,v.jsx)(S,{startTime:F.getTime(),endTime:$.getTime(),keyOpen:re})]})]}),(0,v.jsxs)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,v.jsxs)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(s.Z,{variant:"h5",children:"S\u1ea3n ph\u1ea9m n\u1ed5i b\u1eadt"})}),(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsxs)(d.Z,{direction:"row",alignItems:"center",spacing:0,children:[(0,v.jsx)(l.Z,{size:"small",onClick:function(){return g("quantity")},color:"quantity"===f?"primary":"secondary",variant:"quantity"===f?"outlined":"text",children:"S\u1ed1 l\u01b0\u1ee3ng b\xe1n"}),(0,v.jsx)(l.Z,{size:"small",onClick:function(){return g("view")},color:"view"===f?"primary":"secondary",variant:"view"===f?"outlined":"text",children:"L\u01b0\u1ee3t xem"})]})})]}),(0,v.jsx)(P.Z,{sx:{mt:2,mb:4},content:!1,children:(0,v.jsx)(G,{item:!0,xs:12,md:7,lg:8,filterProduct:f})})]})]})},J=F}}]);
//# sourceMappingURL=904.4dd2e8e4.chunk.js.map